<h1 id="lecture-11"><a aria-hidden="true" class="anchor-heading" href="#lecture-11"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Lecture 11</h1>
<h2 id="threads"><a aria-hidden="true" class="anchor-heading" href="#threads"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Threads</h2>
<h2 id="introduction"><a aria-hidden="true" class="anchor-heading" href="#introduction"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Introduction</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-16-45-08.png"></li>
<li>The unit of dispatching is referred to as a thread or lightweight process.</li>
<li>Thus, to define thread, we can say that it is an independent path of execution of instruction.</li>
<li>The unit of resource ownership is referred to as a process or task.</li>
</ul>
<h2 id="multithreading"><a aria-hidden="true" class="anchor-heading" href="#multithreading"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Multithreading</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-16-47-59.png"></li>
<li>Threads, in  greneral, run the same set of instructions. </li>
<li>However, it might be the case where the interaction with client make some more instructions to execute or some instructions to get skipped.</li>
<li>Eg. Server pool of threads for each client, Word program checking spelling and displaying output at the same time.</li>
</ul>
<h2 id="single-thread-approach-and-multi-thread-approach"><a aria-hidden="true" class="anchor-heading" href="#single-thread-approach-and-multi-thread-approach"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Single Thread approach and Multi thread approach</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-16-52-16.png"></li>
<li><img src="/notes/assets/images/2021-10-12-16-53-25.png"></li>
</ul>
<h2 id="relationship-between-process-and-multithreading"><a aria-hidden="true" class="anchor-heading" href="#relationship-between-process-and-multithreading"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Relationship between process and multithreading</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-16-55-14.png"></li>
</ul>
<h2 id="multithreaded-environment"><a aria-hidden="true" class="anchor-heading" href="#multithreaded-environment"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Multithreaded environment</h2>
<ul>
<li>When we have one or more threads in process, each thread has the following
<ul>
<li><img src="/notes/assets/images/2021-10-12-16-57-25.png"></li>
</ul>
</li>
<li>Theoritical Definition: Thread is an <strong>independent</strong> program counter operating <strong>within</strong> a process.</li>
</ul>
<h2 id="thread-vs-process"><a aria-hidden="true" class="anchor-heading" href="#thread-vs-process"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Thread vs Process</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-00-26.png"></li>
<li>Recap: User address space contains the program and the data.</li>
<li>Thus, we can see that the user address space is shared with multiple threads within the same process.</li>
</ul>
<h2 id="benefits-of-threads"><a aria-hidden="true" class="anchor-heading" href="#benefits-of-threads"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Benefits of threads</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-04-46.png"></li>
</ul>
<h2 id="case-study---file-server-application"><a aria-hidden="true" class="anchor-heading" href="#case-study---file-server-application"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Case study - File Server Application</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-06-59.png"></li>
</ul>
<h2 id="single-user-system"><a aria-hidden="true" class="anchor-heading" href="#single-user-system"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Single User System</h2>
<ul>
<li>In file server, we can have multiple client requests and multiple threads, but in single user system, it is not the case.</li>
<li>Foreground/Background processes can be handled using threads individually.</li>
<li>Asynchronous Processing - Eg. Backing up in background.</li>
<li>Faster Execution - Read one set of data while processing another set.</li>
<li>Organization - Eg. For a word processing program, may allow one thread for each file being edited.</li>
</ul>
<h2 id="management-of-thread-at-process-level-and-similarities-with-processes"><a aria-hidden="true" class="anchor-heading" href="#management-of-thread-at-process-level-and-similarities-with-processes"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Management of thread at process level and similarities with processes</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-11-53.png"></li>
<li><img src="/notes/assets/images/2021-10-12-17-12-55.png"></li>
</ul>
<h2 id="thread-states-and-its-operations"><a aria-hidden="true" class="anchor-heading" href="#thread-states-and-its-operations"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Thread states and its operations</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-13-25.png"></li>
<li><img src="/notes/assets/images/2021-10-12-17-14-36.png"></li>
</ul>
<h2 id="remote-procedure-call"><a aria-hidden="true" class="anchor-heading" href="#remote-procedure-call"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Remote Procedure Call</h2>
<ul>
<li>It means that from one program, we are calling a procedure of another program in the remote machine.</li>
<li>Distributed computing concept starts with RPCs.</li>
<li><img src="/notes/assets/images/2021-10-12-17-16-34.png"></li>
<li>Single Thread Model
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-16-55.png"></li>
</ul>
</li>
<li>Multi Thread Model
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-17-52.png"></li>
</ul>
</li>
</ul>
<h2 id="uniprocessor-multithreading"><a aria-hidden="true" class="anchor-heading" href="#uniprocessor-multithreading"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Uniprocessor Multithreading</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-19-06.png"></li>
</ul>
<h2 id="thread-synchronization"><a aria-hidden="true" class="anchor-heading" href="#thread-synchronization"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Thread Synchronization</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-17-20-26.png"></li>
<li><img src="/notes/assets/images/2021-10-12-17-23-12.png"></li>
</ul>
<h2 id="categories-of-thread-implementation"><a aria-hidden="true" class="anchor-heading" href="#categories-of-thread-implementation"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Categories of Thread Implementation</h2>
<ul>
<li>User Level Threads (ULT)
<ul>
<li><img src="/notes/assets/images/2021-10-12-19-32-18.png"></li>
<li>Java supports ULT.</li>
<li>Suppose that a thread is running and makes a system call.</li>
<li>Since, it made a system call, it must go through the kernel.</li>
<li>The kernel is not aware about the thread, it is only aware about the process and thus, the whole process gets blocked.</li>
<li>Overall, the process state and thread state may not change simultaneously or concurrently.</li>
<li>Advantage
<ul>
<li><img src="/notes/assets/images/2021-10-12-19-41-26.png"></li>
<li><img src="/notes/assets/images/2021-10-12-19-41-38.png"></li>
<li>The different scheduling is done only for application and not done by the kernel as kernel is not aware about the threads.</li>
<li><img src="/notes/assets/images/2021-10-12-19-43-51.png"></li>
</ul>
</li>
<li>Disadvantage
<ul>
<li><img src="/notes/assets/images/2021-10-12-19-44-22.png"></li>
<li><img src="/notes/assets/images/2021-10-12-19-44-39.png"></li>
</ul>
</li>
</ul>
</li>
<li>Kernel Level Threads (KLT)
<ul>
<li><img src="/notes/assets/images/2021-10-12-22-45-15.png"></li>
<li>Advantages
<ul>
<li><img src="/notes/assets/images/2021-10-12-23-45-11.png"></li>
</ul>
</li>
<li>Disadvantages
<ul>
<li><img src="/notes/assets/images/2021-10-12-23-45-33.png"></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="combined-approach"><a aria-hidden="true" class="anchor-heading" href="#combined-approach"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Combined Approach</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-23-49-04.png"></li>
<li>Eg. Solaris uses this approach.</li>
</ul>
<h2 id="thread-and-process"><a aria-hidden="true" class="anchor-heading" href="#thread-and-process"><svg aria-hidden="true" viewBox="0 0 16 16"><use xlink:href="#svg-link"></use></svg></a>Thread and Process</h2>
<ul>
<li><img src="/notes/assets/images/2021-10-12-23-49-57.png"></li>
<li>For 1:M, at a time, a thread belongs to one process.</li>
</ul>